commands:

  make: !Command
    description: Build cantal in ubuntu container
    container: ubuntu
    run: [make]

  docs: !Command
    description: Build HTML docs
    container: docs
    work-dir: docs
    run: [make, html]

  make-docs: !Command
    description: Build
    container: ubuntu
    work-dir: docs
    run: [make]


containers:

  ubuntu:
    uids: [0-65535]
    gids: [0-65535]
    setup:
    - !Ubuntu trusty
    - !UbuntuUniverse ~
    - !Install [make, checkinstall]
    - !TarInstall
      url: https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-unknown-linux-gnu.tar.gz
      script: ./install.sh --prefix=/usr

  docs:
    uids: [0-65535]
    gids: [0-65535]
    setup:
    - !Alpine v3.1
    - !Install [py-sphinx, make]
